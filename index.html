DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Halo AAC â€” Offline</title>
<link rel="icon" href="data:," />
<style>
:root {
  --accent: #2c7be5;
  --bg: #f3f4f6;
  --card: #ffffff;
  --muted: #666;
  --radius: 10px;
}

* { box-sizing: border-box; }
body {
  margin: 0;
  font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  background: var(--bg);
  color: #000;
}

header {
  display: flex;
  align-items: center;
  padding: 10px;
  background: var(--card);
  border-bottom: 1px solid #ccc;
}

header img {
  height: 40px;
  margin-right: 10px;
}

h1 { margin: 0; }

.container {
  padding: 20px;
}

textarea {
  width: 100%;
  height: 100px;
  border-radius: var(--radius);
  border: 1px solid #ccc;
  padding: 10px;
  margin-bottom: 10px;
}

button {
  padding: 10px 15px;
  margin: 5px;
  border: none;
  border-radius: var(--radius);
  background: var(--accent);
  color: #fff;
  cursor: pointer;
}

button:hover { opacity: 0.9; }

.category-section {
  margin-top: 20px;
}

.category-section input {
  padding: 5px;
  margin-right: 5px;
}
</style>
</head>
<body>

<header>
  <img src="logo.png" alt="Halo AAC Logo">
  <h1>Halo AAC</h1>
</header>

<div class="container">

  <h2>Words</h2>
  <textarea id="userWords" placeholder="Add your words here..."></textarea>
  <div>
    <button onclick="saveWords()">Save Words</button>
    <button onclick="exportProfile()">Export Profile</button>
    <button onclick="importProfile()">Import Profile</button>
  </div>

  <div class="category-section">
    <h2>Categories</h2>
    <input type="text" id="newCategory" placeholder="New category name">
    <button onclick="addCategory()">Add Category</button>
    <ul id="categoriesList"></ul>
  </div>

</div>

<script>
// Load saved words
document.addEventListener("DOMContentLoaded", () => {
  const saved = localStorage.getItem("haloWords");
  if (saved) document.getElementById("userWords").value = saved;

  const savedCats = JSON.parse(localStorage.getItem("haloCategories") || "[]");
  savedCats.forEach(cat => addCategoryToList(cat));
});

// Save words
function saveWords() {
  const words = document.getElementById("userWords").value;
  localStorage.setItem("haloWords", words);
  alert("Words saved!");
}

// Export profile
function exportProfile() {
  const data = {
    words: document.getElementById("userWords").value,
    categories: JSON.parse(localStorage.getItem("haloCategories") || "[]")
  };
  const blob = new Blob([JSON.stringify(data)], {type: "application/json"});
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "halo_profile.json";
  a.click();
  URL.revokeObjectURL(url);
}

// Import profile
function importProfile() {
  const input = document.createElement("input");
  input.type = "file";
  input.accept = "application/json";
  input.onchange = e => {
    const file = e.target.files[0];
    const reader = new FileReader();
    reader.onload = () => {
      try {
        const data = JSON.parse(reader.result);
        if (data.words !== undefined) {
          document.getElementById("userWords").value = data.words;
          localStorage.setItem("haloWords", data.words);
        }
        if (data.categories !== undefined) {
          localStorage.setItem("haloCategories", JSON.stringify(data.categories));
          refreshCategories(data.categories);
        }
        alert("Profile imported!");
      } catch {
        alert("Error reading profile file.");
      }
    };
    reader.readAsText(file);
  };
  input.click();
}

// Categories
function addCategory() {
  const input = document.getElementById("newCategory");
  const name = input.value.trim();
  if (!name) return;
  addCategoryToList(name);
  input.value = "";

  const cats = JSON.parse(localStorage.getItem("haloCategories") || "[]");
  cats.push(name);
  localStorage.setItem("haloCategories", JSON.stringify(cats));
}

function addCategoryToList(name) {
  const li = document.createElement("li");
  li.textContent = name;
  document.getElementById("categoriesList").appendChild(li);
}

function refreshCategories(list) {
  const ul = document.getElementById("categoriesList");
  ul.innerHTML = "";
  list.forEach(addCategoryToList);
}
</script>

</body>
</html>

